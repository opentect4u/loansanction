"use strict";(self.webpackChunkpurdcsloan=self.webpackChunkpurdcsloan||[]).push([[843],{3041:(e,l,a)=>{a.d(l,{O:()=>d});const d="https://efilebk.purdcs.com"},8834:(e,l,a)=>{a.d(l,{A:()=>s});a(5043);var d=a(617),r=a(8143),o=a(1966),n=a(3727),t=a(6219),i=a(579);const s=function(e){let{onReset:l,mode:a,onDelete:s,rejectBtn:m,onReject:c,sendToText:u,onSendTo:h,condition:p,showSave:g}=e;return(0,i.jsxs)("div",{className:"flex justify-center",children:["A"==a&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("button",{type:"reset",className:"inline-flex items-center px-5 py-2.5 mt-4 mr-2 sm:mt-6 text-sm font-medium text-center text-gray-800 border border-yellow-300 bg-yellow-300 transition ease-in-out hover:bg-yellow-200 duration-300 rounded-full  dark:focus:ring-primary-900",onClick:l,children:[(0,i.jsx)(d.A,{className:"mr-2"}),"Reset"]}),(0,i.jsxs)("button",{type:"submit",className:" disabled:bg-gray-400 disabled:dark:bg-gray-400 inline-flex items-center px-5 py-2.5 mt-4 sm:mt-6 text-sm font-medium text-center text-white bg-[#6457A6] transition ease-in-out hover:bg-[#4e4480] duration-300  rounded-full focus:ring-gray-600  dark:focus:ring-primary-900 dark:bg-[#92140C] dark:hover:bg-gray-600",children:[(0,i.jsx)(r.A,{className:"mr-2"}),"Submit"]})]}),"E"==a&&(0,i.jsxs)("button",{type:"button",className:"inline-flex items-center px-5 py-2.5 mt-4 mr-2 sm:mt-6 text-sm font-medium text-center text-white border border-[#92140C] bg-[#92140C] transition ease-in-out hover:bg-[#a73b34] duration-300 rounded-full  dark:focus:ring-primary-900",onClick:s,children:[(0,i.jsx)(o.A,{className:"mr-2"}),"Delete"]}),p&&m&&(0,i.jsxs)("button",{type:"button",className:"inline-flex items-center px-5 py-2.5 mt-4 mr-2 sm:mt-6 text-sm font-medium text-center text-white border border-[#92140C] bg-[#92140C] transition ease-in-out hover:bg-[#a73b34] duration-300 rounded-full  dark:focus:ring-primary-900",onClick:c,children:[(0,i.jsx)(n.A,{className:"mr-2"}),"Reject"]}),g&&(0,i.jsxs)("button",{type:"submit",className:" disabled:bg-gray-400 disabled:dark:bg-gray-400 inline-flex items-center px-5 py-2.5 mt-4 sm:mt-6 text-sm font-medium text-center text-white bg-[#6457A6] transition ease-in-out hover:bg-[#4e4480] duration-300  rounded-full focus:ring-gray-600  dark:focus:ring-primary-900 dark:bg-[#92140C] dark:hover:bg-gray-600",children:[(0,i.jsx)(r.A,{className:"mr-2"}),"Save Application"]}),p&&"S"===a&&(0,i.jsxs)("button",{type:"button",className:" disabled:bg-gray-400 disabled:dark:bg-gray-400 inline-flex items-center px-5 ml-2 py-2.5 mt-4 sm:mt-6 text-sm font-medium text-center text-white bg-green-600 transition ease-in-out hover:bg-green-800 duration-300  rounded-full focus:ring-gray-600  dark:focus:ring-primary-900 dark:bg-[#92140C] dark:hover:bg-gray-600",onClick:h,children:[(0,i.jsx)(t.A,{className:"mr-2"}),"Send to ",u]})]})}},1417:(e,l,a)=>{a.d(l,{A:()=>m});a(5043);var d=a(3216),r=a(9678),o=a(9120),n=a(7297),t=a(4623),i=a(579);const s=function(){const e=(0,d.Zp)();return(0,i.jsxs)("div",{className:"-ml-5",children:[(0,i.jsx)(n.A,{icon:(0,i.jsx)(o.A,{}),className:"sm:hidden",onClick:()=>e(-1),type:"primary",style:{right:22,bottom:170,height:50,width:50}}),(0,i.jsx)(t.P.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:.3,type:"just"},className:"hidden sm:flex sm:justify-end items-center",children:(0,i.jsx)(r.A,{title:"Back",children:(0,i.jsx)("button",{className:" inline-flex items-center justify-center text-sm font-medium text-center text-red-800 bg-primary-700 h-10 w-10  bg-yellow-300 hover:duration-300 delay-150 ease-in-out rounded-full hover:rounded-xl dark:focus:ring-primary-900 dark:bg-[#d14141] dark:hover:bg-gray-600 dark:focus:ring-primary-900 hover:bg-primary-800",onClick:()=>e(-1),children:(0,i.jsx)(o.A,{})})})})]})};a(3286);const m=function(e){let{text:l,mode:a=0,data:d,title:r}=e;return(0,i.jsx)("div",{className:"bg-transparent dark:bg-gray-800 relative overflow-hidden mb-5",children:(0,i.jsxs)("div",{className:0===a?"flex flex-col bg-red-800 dark:bg-red-800 w-full md:flex-row items-center align-middle justify-start gap-3 space-x-2 px-8 rounded-full py-3":1===a?"flex flex-col bg-blue-800 dark:bg-blue-800 w-full md:flex-row items-center align-middle justify-start gap-3 space-x-2 px-8 rounded-full py-3":2===a?"flex flex-col bg-teal-800 dark:bg-teal-800 w-full md:flex-row items-center align-middle justify-start gap-3 space-x-2 px-8 rounded-full py-3":"flex flex-col bg-slate-800 dark:bg-slate-800 w-full md:flex-row items-center align-middle justify-start gap-3 space-x-2 px-8 rounded-full py-3",children:[(0,i.jsx)(s,{}),(0,i.jsx)(t.P.h2,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{delay:.2,type:"just"},className:"md:text-2xl sm:text-xl font-semibold text-white capitalize dark:text-gray-400 ",children:l})]})})}},8366:(e,l,a)=>{a.d(l,{Q:()=>r});a(5043);var d=a(6433);const r=(e,l)=>{d.Ay.open({type:e,content:l})}},8727:(e,l,a)=>{a.d(l,{A:()=>r});a(5043);var d=a(579);const r=function(e){var l,a;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("label",{htmlFor:e.name,className:"block mb-2 text-sm capitalize font-bold text-blue-800 dark:text-gray-100",children:[" ",3!==e.mode?e.label:e.label+" ("+(null===(l=e.formControlName)||void 0===l?void 0:l.length)+"/500)"]}),1==e.mode&&(0,d.jsx)("input",{type:e.type,id:e.name,name:e.name,value:e.formControlName,multiple:e.multiple,min:e.min,accept:e.accept,max:e.max,className:"bg-white border-gray-400 text-gray-800 text-sm rounded-md  focus:border-blue-800 active:border-blue-600 focus:ring-blue-600 focus:border-1 duration-500 block w-full p-2 dark:bg-bg-white dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:e.placeholder,onChange:e.handleChange,onBlur:e.handleBlur,disabled:e.disabled}),2==e.mode&&(0,d.jsxs)("select",{id:"countries",className:"bg-white border-1 border-gray-400 text-gray-800 text-sm rounded-lg  focus:border-blue-800 active:border-blue-600 focus:ring-blue-600 focus:border-1 duration-500 block w-full p-2 dark:bg-bg-white dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:e.formControlName,onChange:e.handleChange,name:e.name,placeholder:e.placeholder,options:null===e||void 0===e?void 0:e.data,onBlur:e.handleBlur,disabled:e.disabled,children:[(0,d.jsx)("option",{defaultValue:void 0,children:e.placeholder}),null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.map(((e,l)=>(0,d.jsx)("option",{value:e.code,children:e.name},l)))]}),3==e.mode&&(0,d.jsx)("textarea",{rows:"4",className:"bg-white border-1 border-gray-400 text-sm rounded-lg  focus:border-blue-800 active:border-blue-600 focus:ring-blue-600 focus:border-1 duration-500 block w-full p-2 dark:bg-bg-white dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",name:e.name,value:e.formControlName,placeholder:e.placeholder,onChange:e.handleChange,onBlur:e.handleBlur,disabled:e.disabled,maxLength:500})]})}},350:(e,l,a)=>{a.d(l,{A:()=>r});a(5043);var d=a(579);const r=function(e){var l,a;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("label",{htmlFor:e.name,className:"block mb-2 text-sm capitalize font-bold text-teal-700 dark:text-gray-100",children:[" ",3!==e.mode?e.label:e.label+" ("+(null===(l=e.formControlName)||void 0===l?void 0:l.length)+"/500)"]}),1==e.mode&&(0,d.jsx)("input",{type:e.type,id:e.name,name:e.name,value:e.formControlName,multiple:e.multiple,min:e.min,accept:e.accept,max:e.max,className:"bg-white border-gray-400 text-gray-800 text-sm rounded-md  focus:border-teal-800 active:border-teal-600 focus:ring-teal-600 focus:border-1 duration-500 block w-full p-2 dark:bg-bg-white dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:e.placeholder,onChange:e.handleChange,onBlur:e.handleBlur,disabled:e.disabled}),2==e.mode&&(0,d.jsxs)("select",{id:"countries",className:"bg-white border-1 border-gray-400 text-gray-800 text-sm rounded-lg focus:border-teal-800 active:border-teal-600 focus:ring-teal-600 focus:border-1 duration-500 block w-full p-2 dark:bg-bg-white dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:e.formControlName,onChange:e.handleChange,name:e.name,placeholder:e.placeholder,options:null===e||void 0===e?void 0:e.data,onBlur:e.handleBlur,disabled:e.disabled,children:[(0,d.jsx)("option",{defaultValue:void 0,children:e.placeholder}),null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.map(((e,l)=>(0,d.jsx)("option",{value:e.code,children:e.name},l)))]}),3==e.mode&&(0,d.jsx)("textarea",{rows:"4",className:"bg-white border-1 border-gray-400 text-sm rounded-lg  focus:border-teal-800 active:border-teal-600 focus:ring-teal-600 focus:border-1 duration-500 block w-full p-2 dark:bg-bg-white dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",name:e.name,value:e.formControlName,placeholder:e.placeholder,onChange:e.handleChange,onBlur:e.handleBlur,disabled:e.disabled,maxLength:500})]})}},7095:(e,l,a)=>{a.d(l,{A:()=>n});a(5043);var d=a(6263),r=a(6399),o=a(579);const n=function(e){let{data:l}=e;return(0,o.jsx)(d.A,{mode:"alternate",items:null===l||void 0===l?void 0:l.map(((e,l)=>({key:l,color:l%2!==0?"red":"green",children:(0,o.jsxs)("div",{className:"bg-gray-200 p-5 rounded-xl shadow-lg",children:[(0,o.jsx)("p",{className:"pb-4 text-gray-600 italic",children:new Date(null===e||void 0===e?void 0:e.forwarded_dt).toLocaleString("en-GB")}),(0,o.jsx)("p",{className:"mb-1",children:(0,o.jsxs)(r.A,{color:"green",className:"rounded-md",children:["From: ",null===e||void 0===e?void 0:e.fwd_name]})}),(0,o.jsx)("p",{children:(0,o.jsxs)(r.A,{color:"red",className:"rounded-md",children:["To: ",null===e||void 0===e?void 0:e.fwd_to_name]})}),(0,o.jsx)("p",{className:"text-base pt-4 text-gray-700 border-t-2 border-dashed border-gray-300 my-4",children:null===e||void 0===e?void 0:e.remarks})]})})))})}},9657:(e,l,a)=>{a.d(l,{A:()=>n});a(5043);var d=a(4623),r=a(6399),o=a(579);const n=function(e){let{title:l,color:a="error"}=e;return(0,o.jsx)(d.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1,type:"tween",stiffness:500},children:(0,o.jsxs)(r.A,{className:"text-[12.6px] my-2",bordered:!1,color:a,children:[l,"."]})})}},3687:(e,l,a)=>{a.r(l),a.d(l,{default:()=>B});var d=a(5043),r=(a(1874),a(3216)),o=a(8834),n=a(9657),t=(a(3731),a(3892)),i=a(899),s=a(6213),m=a(8366),c=a(3041),u=a(6399),h=a(1686),p=a(4520),g=a(7021),_=a(119),v=a(164),b=a(7630),x=a(1966),f=a(5037),y=a(5337),j=a(1417),N=a(9023),A=a(7090),w=a(2229),k=(a(8727),a(7095)),C=a(350),S=a(579);const B=function(){var e;const l=(0,r.g)(),[a,B]=(0,d.useState)(!1),[O,R]=(0,d.useState)([]),E=(0,r.zy)(),{loanAppData:D}=E.state||{},F=(0,r.Zp)(),[T,q]=(0,d.useState)((()=>0)),[M,I]=(0,d.useState)((()=>[])),[L,Q]=(0,d.useState)((()=>[])),[P,$]=(0,d.useState)((()=>"")),[J,Y]=(0,d.useState)((()=>[])),[z,G]=(0,d.useState)((()=>null)),[H,U]=(0,d.useState)((()=>[])),[V,W]=(0,d.useState)((()=>"")),[Z,K]=(0,d.useState)((()=>!1)),[X,ee]=(0,d.useState)((()=>!1)),[le,ae]=(0,d.useState)((()=>[])),[de,re]=(0,d.useState)(""),[oe,ne]=(0,d.useState)(""),[te,ie]=(0,d.useState)(""),[se,me]=(0,d.useState)(),[ce,ue]=(0,d.useState)(""),[he,pe]=(0,d.useState)((()=>[])),[ge,_e]=(0,d.useState)((()=>[]));console.log(l,"params"),console.log(E,"location");const[ve,be]=(0,d.useState)({l_member_id:"",l_membership_date:"",l_name:"",l_father_husband_name:"",l_gender:"",l_dob:"",l_email:"",l_mobile_no:"",l_address:"",l_loan_through_branch:"",l_applied_for:"",l_loan_amount:"",l_duration:"",l_documents:[{l_file_name:"",l_file:""}]}),xe=i.Ik({l_member_id:i.Yj().required("Member ID is required"),l_membership_date:i.Yj().required("Membership Date is required"),l_name:i.Yj().max(60,"Name should always be less than 61 characters.").required("Name is required"),l_father_husband_name:i.Yj().max(60,"Father/Husband name should always be less than 61 characters.").required("Father/Husband is required"),l_gender:i.Yj().required("Gender is required"),l_dob:i.Yj().required("DOB is required"),l_email:i.Yj().email("Enter valid email").optional(),l_mobile_no:i.Yj().matches(/^[0-9]+$/,"Must be only digits").min(10,"Number should exactly be 10 digits").max(10,"Number should exactly be 10 digits").required("Mobile Numeber is required"),l_address:i.Yj().max(500,"Address length should always be less than 500 characters").required("Address is required"),l_loan_through_branch:i.Yj().required("Loan Through Branch is required"),l_applied_for:i.Yj().required("Applied For is required"),l_loan_amount:i.ai().integer("Only integers are allowed").min(1,"Loan Amount should always be greater than 0").max(1e9,"Max loan amount is 1000000000").required("Loan Amount is required"),l_duration:i.ai().min(0,"Duration should always be greater than equal 0").required("Duration is required"),l_documents:i.YO().of(i.Ik().shape({l_file_name:i.Yj(),l_file:i.gl()}))});(0,d.useEffect)((()=>{console.log("Calls when onSubmit api axios success changes...")}),[T]),(0,d.useEffect)((()=>{(async()=>{await s.A.get(`${c.O}/sql/branch_dtls`).then((e=>{var l,a;1===(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.suc)?I(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.msg):(0,m.Q)("error","Data not found!")})).catch((e=>{(0,m.Q)("error","Some error occurred while fetching Branches.")}))})(),(async()=>{await s.A.get(`${c.O}/sql/loan_type_dtls`).then((e=>{var l,a;1===(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.suc)?Q(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.msg):(0,m.Q)("error","Data not found!")})).catch((e=>{(0,m.Q)("error","Some error occurred while fetching Loan Types.")}))})(),(async()=>{await s.A.get(`${c.O}/brn/get_credit_manager?brn_code=${+JSON.parse(localStorage.getItem("cr_mgr_details")).branch_code}`).then((e=>{var l,a,d;1===(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.suc)?(_e(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.msg),console.log("LLLLLLLLLL",null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.msg)):(0,m.Q)("warning","No Credit Managers Found!")})).catch((e=>{(0,m.Q)("error","Some error occurred while fetching Credit Managers.")}))})()}),[]);const fe=async e=>{var a,d;console.log("onsubmit called"),console.log(e,"onsubmit vendor"),B(!0);var r=new FormData;r.append("application_no",+(null===l||void 0===l?void 0:l.id)),r.append("user_id",+(null===(a=JSON.parse(localStorage.getItem("cr_mgr_details")))||void 0===a?void 0:a.id)),r.append("member_id",+(null===e||void 0===e?void 0:e.l_member_id)),r.append("member_name",null===e||void 0===e?void 0:e.l_name),r.append("father_name",null===e||void 0===e?void 0:e.l_father_husband_name),r.append("gender",null===e||void 0===e?void 0:e.l_gender),r.append("dob",null===e||void 0===e?void 0:e.l_dob),r.append("member_dt",null===e||void 0===e?void 0:e.l_membership_date),r.append("email",null===e||void 0===e?void 0:e.l_email),r.append("mobile_no",null===e||void 0===e?void 0:e.l_mobile_no),r.append("memb_address",null===e||void 0===e?void 0:e.l_address),r.append("branch_code",null===e||void 0===e?void 0:e.l_loan_through_branch),r.append("loan_type",null===e||void 0===e?void 0:e.l_applied_for),r.append("loan_amt",null===e||void 0===e?void 0:e.l_loan_amount),r.append("loan_period",null===e||void 0===e?void 0:e.l_duration),r.append("created_by",null===(d=JSON.parse(localStorage.getItem("cr_mgr_details")))||void 0===d?void 0:d.created_by),r.append("file_name",JSON.stringify(null===e||void 0===e?void 0:e.l_documents)),null===H||void 0===H||H.forEach(((e,l)=>{new File([e],`File_Application_${l}.pdf`);r.append("file_path",e)})),console.log("FORM DATA",r),await s.A.post(`${c.O}/sql/insert_loan_dtls`,r).then((e=>{var l,a;(console.log("API RESPONSE",e),1===(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.suc))&&((0,m.Q)("success",null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.msg),F(N.C.CREDIT_MANAGER_HOME))})).catch((e=>{console.log("EERRRRRRRRRR",e)})),B(!1)},ye=async()=>{var e;B(!0),await s.A.get(`${c.O}/credit/fetch_credit_pen_dtls?user_id=${+(null===(e=JSON.parse(localStorage.getItem("cr_mgr_details")))||void 0===e?void 0:e.id)}&application_no=${null===l||void 0===l?void 0:l.id}`).then((e=>{var l,a,d,r,o,n,t,i,s,c,u,h,p,g,_,v,b,x,f,y,j,N,A,w,k,C,S,B,O,R,E,D,F,T,q,M,I,L,Q,P,$,J,Y,z,G,H,U,V,Z,K,X,ee,le,ae,de,oe,ne,te;1===(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.suc)?(be({l_member_id:null===e||void 0===e||null===(a=e.data)||void 0===a||null===(d=a.msg[0])||void 0===d||null===(r=d.pending_dtls[0])||void 0===r?void 0:r.member_id,l_membership_date:(null===(o=new Date(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(i=t.msg[0])||void 0===i||null===(s=i.pending_dtls[0])||void 0===s?void 0:s.member_dt))||void 0===o||null===(n=o.toISOString())||void 0===n?void 0:n.split("T")[0])||"",l_name:null===e||void 0===e||null===(c=e.data)||void 0===c||null===(u=c.msg[0])||void 0===u||null===(h=u.pending_dtls[0])||void 0===h?void 0:h.member_name,l_father_husband_name:null===e||void 0===e||null===(p=e.data)||void 0===p||null===(g=p.msg[0])||void 0===g||null===(_=g.pending_dtls[0])||void 0===_?void 0:_.father_name,l_gender:null===e||void 0===e||null===(v=e.data)||void 0===v||null===(b=v.msg[0])||void 0===b||null===(x=b.pending_dtls[0])||void 0===x?void 0:x.gender,l_dob:(null===(f=new Date(null===e||void 0===e||null===(j=e.data)||void 0===j||null===(N=j.msg[0])||void 0===N||null===(A=N.pending_dtls[0])||void 0===A?void 0:A.dob))||void 0===f||null===(y=f.toISOString())||void 0===y?void 0:y.split("T")[0])||"",l_email:null===e||void 0===e||null===(w=e.data)||void 0===w||null===(k=w.msg[0])||void 0===k||null===(C=k.pending_dtls[0])||void 0===C?void 0:C.email,l_mobile_no:null===e||void 0===e||null===(S=e.data)||void 0===S||null===(B=S.msg[0])||void 0===B||null===(O=B.pending_dtls[0])||void 0===O?void 0:O.mobile_no,l_address:null===e||void 0===e||null===(R=e.data)||void 0===R||null===(E=R.msg[0])||void 0===E||null===(D=E.pending_dtls[0])||void 0===D?void 0:D.memb_address,l_loan_through_branch:null===e||void 0===e||null===(F=e.data)||void 0===F||null===(T=F.msg[0])||void 0===T||null===(q=T.pending_dtls[0])||void 0===q?void 0:q.branch_code,l_applied_for:null===e||void 0===e||null===(M=e.data)||void 0===M||null===(I=M.msg[0])||void 0===I||null===(L=I.pending_dtls[0])||void 0===L?void 0:L.loan_type,l_loan_amount:null===e||void 0===e||null===(Q=e.data)||void 0===Q||null===(P=Q.msg[0])||void 0===P||null===($=P.pending_dtls[0])||void 0===$?void 0:$.loan_amt,l_duration:null===e||void 0===e||null===(J=e.data)||void 0===J||null===(Y=J.msg[0])||void 0===Y||null===(z=Y.pending_dtls[0])||void 0===z?void 0:z.loan_period,l_documents:[{l_file_name:"",l_file:""}]}),console.log("BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB",null===e||void 0===e?void 0:e.data),re(null===e||void 0===e||null===(G=e.data)||void 0===G||null===(H=G.msg[0])||void 0===H||null===(U=H.pending_dtls[0])||void 0===U?void 0:U.forwarded_dt),ie(null===e||void 0===e||null===(V=e.data)||void 0===V||null===(Z=V.msg[0])||void 0===Z||null===(K=Z.pending_dtls[0])||void 0===K?void 0:K.remarks),W(null===e||void 0===e||null===(X=e.data)||void 0===X||null===(ee=X.msg[0])||void 0===ee||null===(le=ee.pending_dtls[0])||void 0===le?void 0:le.application_status),me(null===e||void 0===e||null===(ae=e.data)||void 0===ae||null===(de=ae.msg[0])||void 0===de||null===(oe=de.pending_dtls[0])||void 0===oe?void 0:oe.forwarded_by),pe(null===e||void 0===e||null===(ne=e.data)||void 0===ne||null===(te=ne.msg[0])||void 0===te?void 0:te.reject_dt)):(0,m.Q)("warning","No data found!")})).catch((e=>{console.log("Error loan",e),(0,m.Q)("error","Some error occurred while fetching loan details.")})),await(async()=>{const e={application_no:+(null===l||void 0===l?void 0:l.id)};await s.A.post(`${c.O}/sql/file_details`,e).then((e=>{var l,a;1===(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.suc)?ae(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.msg):(0,m.Q)("error","No Files Uploaded.")})).catch((e=>{(0,m.Q)("error","Error occurred while fetching uploaded files.")}))})(),B(!1)};(0,d.useEffect)((()=>{ye()}),[]);const je=(0,t.Wx)({initialValues:ve,onSubmit:fe,validationSchema:xe,validateOnChange:!0,validateOnBlur:!0,enableReinitialize:!0,validateOnMount:!0});return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(A.A,{mode:2}),(0,S.jsx)("section",{className:"bg-teal-50 dark:bg-[#001529] flex justify-center align-middle p-5",children:(0,S.jsxs)("div",{className:" bg-white p-5 w-4/5 min-h-screen rounded-3xl",children:[(0,S.jsx)("div",{className:"flex justify-between ml-14 mr-12",children:(0,S.jsxs)(u.A,{color:"orange",className:"p-1 px-2 text-sm rounded-full font-bold",children:[(0,S.jsx)(_.A,{})," Forwarded on:"," ",null===(e=new Date(de))||void 0===e?void 0:e.toLocaleString("en-GB")]})}),(0,S.jsx)("div",{className:"w-auto mx-14 my-4",children:(0,S.jsx)(j.A,{text:"Pending Application Preview & Edit",mode:2})}),(0,S.jsx)(h.A,{indicator:(0,S.jsx)(v.A,{spin:!0}),size:"large",className:"text-teal-800 dark:text-gray-400",spinning:a,children:(0,S.jsx)(t.l1,{initialValues:ve,validationSchema:xe,onSubmit:fe,validateOnMount:!0,enableReinitialize:!0,children:e=>{let{values:r,handleReset:i,handleChange:_,handleBlur:j,handleSubmit:N,errors:A,touched:w}=e;return(0,S.jsx)("form",{onSubmit:N,children:(0,S.jsxs)("div",{className:"card flex flex-col justify-center px-16 py-5",children:[(0,S.jsx)("div",{className:"mb-4",children:(0,S.jsx)(C.A,{placeholder:"Application Number",type:"text",label:"Application Number",name:"app_no",formControlName:l.id,mode:1,disabled:!0})}),(0,S.jsxs)("div",{className:"grid gap-4 sm:grid-cols-6 sm:gap-6",children:[(0,S.jsxs)("div",{className:"sm:col-span-2",children:[(0,S.jsx)(C.A,{placeholder:"Type Member ID...",type:"text",label:"Member ID",name:"l_member_id",formControlName:r.l_member_id,handleChange:_,handleBlur:j,mode:1,disabled:!0}),A.l_member_id&&w.l_member_id?(0,S.jsx)(n.A,{title:A.l_member_id}):null]}),(0,S.jsxs)("div",{className:"sm:col-span-2",children:[(0,S.jsx)(C.A,{placeholder:"Type Membership Date...",type:"date",label:"Membership Date",name:"l_membership_date",formControlName:r.l_membership_date,handleChange:_,handleBlur:j,min:"1900-12-31",mode:1,disabled:!0}),A.l_membership_date&&w.l_membership_date?(0,S.jsx)(n.A,{title:A.l_membership_date}):null]}),(0,S.jsxs)("div",{className:"sm:col-span-2",children:[(0,S.jsx)(C.A,{placeholder:"Type name...",type:"text",label:"Name",name:"l_name",formControlName:r.l_name,handleChange:_,handleBlur:j,mode:1,disabled:!0}),A.l_name&&w.l_name?(0,S.jsx)(n.A,{title:A.l_name}):null]})]}),(0,S.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 sm:gap-6 pt-5",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)(C.A,{placeholder:"Type Father's/Husband's Name...",type:"text",label:"Father's/Husband's Name",name:"l_father_husband_name",formControlName:r.l_father_husband_name,handleChange:_,handleBlur:j,mode:1,disabled:!0}),A.l_father_husband_name&&w.l_father_husband_name?(0,S.jsx)(n.A,{title:A.l_father_husband_name}):null]}),(0,S.jsxs)("div",{children:[(0,S.jsx)(C.A,{placeholder:"Select Gender...",type:"text",label:"Gender",name:"l_gender",formControlName:r.l_gender,handleChange:_,handleBlur:j,data:[{code:"M",name:"Male"},{code:"F",name:"Female"},{code:"L",name:"LGBTQA+"}],mode:2,disabled:!0}),A.l_gender&&w.l_gender?(0,S.jsx)(n.A,{title:A.l_gender}):null]}),(0,S.jsxs)("div",{children:[(0,S.jsx)(C.A,{placeholder:"Type DOB...",type:"date",label:"Date of Birth (DOB)",name:"l_dob",formControlName:r.l_dob,handleChange:_,handleBlur:j,max:r.l_membership_date,mode:1,disabled:!0}),A.l_dob&&w.l_dob?(0,S.jsx)(n.A,{title:A.l_dob}):null]}),(0,S.jsxs)("div",{children:[(0,S.jsx)(C.A,{placeholder:"Type Email...",type:"email",label:"Email",name:"l_email",formControlName:r.l_email,handleChange:_,handleBlur:j,mode:1,disabled:!0}),A.l_email&&w.l_email?(0,S.jsx)(n.A,{title:A.l_email}):null]}),(0,S.jsxs)("div",{children:[(0,S.jsx)(C.A,{placeholder:"Type Address...",type:"text",label:"Address",name:"l_address",formControlName:r.l_address,handleChange:_,handleBlur:j,mode:3,disabled:!0}),A.l_address&&w.l_address?(0,S.jsx)(n.A,{title:A.l_address}):null]}),(0,S.jsxs)("div",{children:[(0,S.jsx)(C.A,{placeholder:"Type Mobile Number...",type:"number",label:"Mobile Number",name:"l_mobile_no",formControlName:r.l_mobile_no,handleChange:_,handleBlur:j,mode:1,disabled:!0}),A.l_mobile_no&&w.l_mobile_no?(0,S.jsx)(n.A,{title:A.l_mobile_no}):null]}),(0,S.jsxs)("div",{children:[(0,S.jsx)(C.A,{placeholder:"Type Loan Through Branch...",type:"text",label:"Loan Through Branch",name:"l_loan_through_branch",formControlName:r.l_loan_through_branch,handleChange:_,handleBlur:j,data:null===M||void 0===M?void 0:M.map((e=>({code:null===e||void 0===e?void 0:e.sl_no,name:null===e||void 0===e?void 0:e.branch_name}))),mode:2,disabled:"A"===V||"R"===V}),A.l_loan_through_branch&&w.l_loan_through_branch?(0,S.jsx)(n.A,{title:A.l_loan_through_branch}):null]}),(0,S.jsxs)("div",{children:[(0,S.jsx)(C.A,{placeholder:"Type Applied For...",type:"text",label:"Applied For",name:"l_applied_for",formControlName:r.l_applied_for,handleChange:_,handleBlur:j,data:null===L||void 0===L?void 0:L.map((e=>({code:null===e||void 0===e?void 0:e.sl_no,name:null===e||void 0===e?void 0:e.loan_type}))),mode:2,disabled:"A"===V||"R"===V}),A.l_applied_for&&w.l_applied_for?(0,S.jsx)(n.A,{title:A.l_applied_for}):null]}),(0,S.jsxs)("div",{children:[(0,S.jsx)(C.A,{placeholder:"Type Loan Amount...",type:"number",label:"Loan Amount",name:"l_loan_amount",formControlName:r.l_loan_amount,handleChange:_,handleBlur:j,mode:1,disabled:"A"===V||"R"===V}),A.l_loan_amount&&w.l_loan_amount?(0,S.jsx)(n.A,{title:A.l_loan_amount}):null]}),(0,S.jsxs)("div",{children:[(0,S.jsx)(C.A,{placeholder:"Type Duration...",type:"number",label:"Duration (In Months)",name:"l_duration",formControlName:r.l_duration,handleChange:_,handleBlur:j,mode:1,disabled:"A"===V||"R"===V}),A.l_duration&&w.l_duration?(0,S.jsx)(n.A,{title:A.l_duration}):null]})]}),(0,S.jsx)(h.A,{indicator:(0,S.jsx)(v.A,{spin:!0}),size:"large",className:"text-teal-800 dark:text-gray-400",spinning:a,children:(0,S.jsxs)("div",{className:"mt-10 text-teal-800",children:[(0,S.jsx)("div",{className:"text-lg font-bold",children:"Uploaded Files"}),(0,S.jsx)("div",{className:"grid grid-cols-4 gap-4 place-items-start mt-3",children:null===le||void 0===le?void 0:le.map(((e,a)=>(0,S.jsxs)("div",{children:[(0,S.jsx)(C.A,{placeholder:"Entered File Name...",type:"text",label:"File Name",formControlName:null===e||void 0===e?void 0:e.file_name,disabled:!0,mode:1}),(0,S.jsx)("div",{className:"mt-3 text-teal-500",children:(0,S.jsx)("a",{href:c.O+"/"+(null===e||void 0===e?void 0:e.file_path),target:"__blank",children:(0,S.jsx)(b.A,{className:"text-red-800 text-6xl"})})}),(0,S.jsx)("div",{className:"-mt-6",children:(0,S.jsx)(p.A,{title:"Delete file?",description:"Are you sure to delete this file?",onConfirm:d=>{(async(e,a,d)=>{B(!0),e.preventDefault();const r={application_no:+(null===l||void 0===l?void 0:l.id),sl_no:+d};await s.A.post(`${c.O}/sql/update_file`,r).then((e=>{var l,d;1===(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.suc)?(ae((e=>e.filter(((e,l)=>l!==a)))),(0,m.Q)("success",null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.msg)):(0,m.Q)("error","Not deleted!")})).catch((e=>{(0,m.Q)("error","Some error occurred while deleting a file.")})),B(!1)})(d,a,null===e||void 0===e?void 0:e.sl_no)},onCancel:()=>null,okText:"Delete",cancelText:"Cancel",okType:"link",okButtonProps:{style:{backgroundColor:"#5f49cc",color:"#ffffff"}},children:"A"!==V&&"R"!==V&&(0,S.jsx)(x.A,{className:"text-[#5f49cc] text-xl ml-40 hover:animate-pulse hover:text-black delay-50 duration-50"})})})]},a)))})]})}),"A"!==V&&"R"!==V&&(0,S.jsx)(t.ED,{name:"l_documents",children:e=>{var l;let{push:a,remove:o,insert:t,unshift:i}=e;return(0,S.jsx)(S.Fragment,{children:null===(l=r.l_documents)||void 0===l?void 0:l.map(((e,l)=>{var t;return(0,S.jsxs)(d.Fragment,{children:[(0,S.jsxs)("div",{className:"flex flex-col my-8 border-t-2 border-yellow-200 border-dashed",children:[(0,S.jsx)("div",{className:"mt-4",children:(0,S.jsx)(C.A,{placeholder:"Type File Name...",type:"text",label:"File Name",name:`l_documents[${l}].l_file_name`,formControlName:e.l_file_name,handleChange:_,handleBlur:j,mode:1})}),(0,S.jsxs)("div",{className:"mt-2",children:[(0,S.jsx)(C.A,{placeholder:"Upload Documents",type:"file",accept:"application/pdf",label:"Upload Documents",name:`l_documents[${l}].l_file`,handleChange:e=>{const l=e.target.files;l&&Array.from(l).forEach((e=>{(e=>{U((l=>[...l,e]))})(e)}))},handleBlur:j,mode:1}),A.l_file&&w.l_file?(0,S.jsx)(n.A,{title:A.l_file}):null]})]}),(0,S.jsxs)("div",{className:"flex flex-row gap-2 justify-end align-middle",children:[(null===r||void 0===r||null===(t=r.l_documents)||void 0===t?void 0:t.length)>1&&(0,S.jsx)("div",{children:(0,S.jsx)(g.Ay,{className:"rounded-full text-white bg-red-800 border-red-800",onClick:()=>{o(l),(e=>{U(H.filter(((l,a)=>a!==e)))})(l)},icon:(0,S.jsx)(f.A,{})})}),(0,S.jsx)("div",{children:(0,S.jsx)(g.Ay,{className:"rounded-full bg-yellow-400 text-white",onClick:()=>{a({l_file_name:"",l_file:""}),console.log(r.l_documents)},icon:(0,S.jsx)(y.A,{})})})]})]},l)}))})}}),(null===he||void 0===he?void 0:he.length)>0&&(0,S.jsxs)("div",{className:"mt-14 bg-teal-50 rounded-xl p-10",children:[(0,S.jsx)("div",{className:"text-lg font-bold text-teal-800 mb-4",children:"Comments / Rejection Remarks"}),(0,S.jsx)(k.A,{data:he})]}),"A"!==V&&"R"!==V&&(0,S.jsxs)("div",{className:"mt-7",children:[(0,S.jsx)("div",{}),(0,S.jsxs)("div",{className:"mt-7",children:[(0,S.jsx)(C.A,{placeholder:"Write comments...",type:"text",label:"Comments",name:"comments",formControlName:ce,handleChange:e=>ue(e.target.value),mode:3}),ce?null:(0,S.jsx)(n.A,{title:"Please Enter Comments Before Forwarding or Rejecting"})]})]}),"A"!==V&&"R"!==V?(0,S.jsx)("div",{className:"mt-10",children:(0,S.jsx)(o.A,{mode:"S",rejectBtn:!0,onReject:()=>{ee(!0)},sendToText:"CEO",onSendTo:()=>K(!0),condition:(null===le||void 0===le?void 0:le.length)>0,showSave:!0})}):"A"===V?(0,S.jsx)(u.A,{color:"purple",className:"mt-10 p-5 rounded-lg text-xl font-bold self-center",children:"E-Files forwarded to CEO."}):"R"===V?(0,S.jsx)(u.A,{color:"orange",className:"mt-10 p-5 rounded-lg text-xl font-bold self-center",children:"E-Files rejected and sent to Branch Manager."}):(0,S.jsx)(u.A,{color:"red",className:"mt-10 p-5 rounded-lg text-xl font-bold self-center",children:"Some error occurred. [Status is not b/w P/A/R]"})]})})}})})]})}),(0,S.jsx)(w.A,{flag:4,onPress:()=>K(!Z),visible:Z,onPressYes:()=>{ce?(K(!Z),(async e=>{var a;B(!0);const d={brn_code:JSON.parse(localStorage.getItem("cr_mgr_details")).branch_code,credit_brn_code:JSON.parse(localStorage.getItem("cr_mgr_details")).branch_code,application_no:+l.id,credit_user_id:JSON.parse(localStorage.getItem("cr_mgr_details")).id,remarks:ce,application_status:e};console.log("ooooooooooooooo------------------",+(null===(a=JSON.parse(localStorage.getItem("cr_mgr_details")))||void 0===a?void 0:a.user_type)),await s.A.post(`${c.O}/credit/forward_ceo`,d).then((e=>{K(!Z),F(N.C.CREDIT_MANAGER_HOME),(0,m.Q)("success","E-Files sent to CEO.")})).catch((e=>{(0,m.Q)("error","Something went wrong while sending to CEO!")})),B(!1)})("A")):((0,m.Q)("error","Write Comments."),K(!Z))},onPressNo:()=>{K(!Z),(0,m.Q)("warning","User cancelled operation.")}}),(0,S.jsx)(w.A,{flag:4,onPress:()=>ee(!X),visible:X,onPressYes:e=>{ce?(ee(!X),(async(e,a)=>{var d;a.preventDefault(),B(!0);const r={brn_code:je.values.l_loan_through_branch,application_no:+l.id,user_id:JSON.parse(localStorage.getItem("cr_mgr_details")).id,fwd_brn:JSON.parse(localStorage.getItem("cr_mgr_details")).branch_code,loan_appr_id:se,brn_remarks:ce,application_status:e,brn_mgr_id:JSON.parse(localStorage.getItem("cr_mgr_details")).id,created_by:JSON.parse(localStorage.getItem("cr_mgr_details")).first_name+" "+JSON.parse(localStorage.getItem("cr_mgr_details")).last_name};console.log("ooooooooooooooo------------------",+(null===(d=JSON.parse(localStorage.getItem("cr_mgr_details")))||void 0===d?void 0:d.user_type)),await s.A.post(`${c.O}/credit/credit_manager_reject`,r).then((e=>{(0,m.Q)("error","Application Rejected."),F(N.C.CREDIT_MANAGER_HOME)})).catch((e=>{(0,m.Q)("error","Something went wrong while sending to CEO!")})),B(!1)})("R",e)):((0,m.Q)("error","Write Comments."),ee(!X))},onPressNo:()=>{ee(!X),(0,m.Q)("warning","User cancelled operation.")}})]})}},119:(e,l,a)=>{a.d(l,{A:()=>i});var d=a(8168),r=a(5043);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"};var n=a(2172),t=function(e,l){return r.createElement(n.A,(0,d.A)({},e,{ref:l,icon:o}))};const i=r.forwardRef(t)},1874:()=>{}}]);
//# sourceMappingURL=843.73320576.chunk.js.map