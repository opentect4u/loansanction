"use strict";(self.webpackChunkpurdcsloan=self.webpackChunkpurdcsloan||[]).push([[253],{8253:(e,l,a)=>{a.r(l),a.d(l,{default:()=>C});var n=a(5043),r=(a(1874),a(3216)),o=a(1299),d=a(9657),i=a(3731),t=a(3892),s=a(899),u=a(6213),m=a(3307),_=a(3041),h=a(1686),c=a(164),v=a(5603),b=a(9023);const p=["","one","two","three","four","five","six","seven","eight","nine"],g=["","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],x=["","ten","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],f=["","thousand","million","billion"];function A(e){return 0===e?"":e<10?p[e]+" ":e<20?g[e-10]+" ":e<100?x[Math.floor(e/10)]+" "+A(e%10):p[Math.floor(e/100)]+" hundred "+A(e%100)}function j(e){if(0===e)return"ZERO";let l="",a=0;for(;e>0;)e%1e3!==0&&(l=A(e%1e3)+f[a]+" "+l),e=Math.floor(e/1e3),a++;return l.trim().toUpperCase()}var y=a(579);const C=function(){const e=(0,r.g)(),[l,a]=(0,n.useState)(!1),p=(0,r.Zp)(),[g,x]=(0,n.useState)((()=>0)),[f,A]=(0,n.useState)((()=>[])),[C,N]=(0,n.useState)((()=>[])),[B,q]=(0,n.useState)((()=>""));console.log(e,"params");const[D,T]=(0,n.useState)({l_member_id:"",l_membership_date:"",l_name:"",l_father_husband_name:"",l_gender:"",l_dob:"",l_email:"",l_mobile_no:"",l_address:"",l_loan_through_branch:"",l_applied_for:"",l_loan_amount:"",l_duration:""}),w={l_member_id:"",l_membership_date:"",l_name:"",l_father_husband_name:"",l_gender:"",l_dob:"",l_email:"",l_mobile_no:"",l_address:"",l_loan_through_branch:"",l_applied_for:"",l_loan_amount:"",l_duration:""},S=s.Ik({l_member_id:s.Yj().required("Member ID is required"),l_membership_date:s.Yj().required("Membership Date is required"),l_name:s.Yj().max(60,"Name should always be less than 61 characters.").required("Name is required"),l_father_husband_name:s.Yj().max(60,"Father/Husband name should always be less than 61 characters.").required("Father/Husband is required"),l_gender:s.Yj().required("Gender is required"),l_dob:s.Yj().required("DOB is required"),l_email:s.Yj().email("Enter valid email").optional(),l_mobile_no:s.Yj().matches(/^[0-9]+$/,"Must be only digits").min(10,"Number should exactly be 10 digits").max(10,"Number should exactly be 10 digits").required("Mobile Numeber is required"),l_address:s.Yj().max(500,"Address length should always be less than 500 characters").required("Address is required"),l_loan_through_branch:s.Yj().required("Loan Through Branch is required"),l_applied_for:s.Yj().required("Applied For is required"),l_loan_amount:s.ai().integer("Only integers are allowed").min(1,"Loan Amount should always be greater than 0").max(1e9,"Max loan amount is 1000000000").required("Loan Amount is required"),l_duration:s.ai().min(0,"Duration should always be greater than equal 0").required("Duration is required")});(0,n.useEffect)((()=>{console.log("Calls when onSubmit api axios success changes...")}),[g]),(0,n.useEffect)((()=>{(async()=>{await u.A.get("".concat(_.O,"/sql/branch_dtls")).then((e=>{var l,a;1===(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.suc)?A(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.msg):(0,m.Q)("error","Data not found!")})).catch((e=>{(0,m.Q)("error","Some error occurred while fetching Branches.")}))})(),(async()=>{await u.A.get("".concat(_.O,"/sql/loan_type_dtls")).then((e=>{var l,a;1===(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.suc)?N(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.msg):(0,m.Q)("error","Data not found!")})).catch((e=>{(0,m.Q)("error","Some error occurred while fetching Loan Types.")}))})()}),[]);const M=(0,t.Wx)({initialValues:D,onSubmit:async l=>{console.log("onsubmit called"),console.log(l,"onsubmit vendor"),a(!0);const n={application_no:+(null===e||void 0===e?void 0:e.id),member_id:+(null===l||void 0===l?void 0:l.l_member_id),member_name:null===l||void 0===l?void 0:l.l_name,father_name:null===l||void 0===l?void 0:l.l_father_husband_name,gender:null===l||void 0===l?void 0:l.l_gender,dob:null===l||void 0===l?void 0:l.l_dob,member_dt:null===l||void 0===l?void 0:l.l_membership_date,email:null===l||void 0===l?void 0:l.l_email,mobile_no:null===l||void 0===l?void 0:l.l_mobile_no,memb_address:null===l||void 0===l?void 0:l.l_address,branch_code:null===l||void 0===l?void 0:l.l_loan_through_branch,loan_type:null===l||void 0===l?void 0:l.l_applied_for,loan_amt:null===l||void 0===l?void 0:l.l_loan_amount,loan_period:null===l||void 0===l?void 0:l.l_duration,created_by:null===l||void 0===l?void 0:l.l_name};await u.A.post("".concat(_.O,"/sql/insert_loan_dtls"),n).then((e=>{var a,n,r,o,d;1===(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.suc)?(q(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.app_id),console.log("IIIIIIIIIAAAAAAAAAAAAAAAAAA",null===e||void 0===e?void 0:e.data),p("".concat(b.C.LOAN_VIEW),{state:{loanFormValues:l,loanType:null===C||void 0===C||null===(r=C.filter((e=>+(null===l||void 0===l?void 0:l.l_applied_for)===+(null===e||void 0===e?void 0:e.sl_no)))[0])||void 0===r?void 0:r.loan_type,loanBranch:null===f||void 0===f||null===(o=f.filter((e=>+(null===l||void 0===l?void 0:l.l_loan_through_branch)===+(null===e||void 0===e?void 0:e.sl_no)))[0])||void 0===o?void 0:o.branch_name,gender:"M"===l.l_gender?"Male":"F"===l.l_gender?"Female":"L"===l.l_gender?"LGBTQA+":"Error occurred!",applicationId:null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.app_id}})):(0,m.Q)("error","Data not found!")})).catch((e=>{(0,m.Q)("error","Some error occurred while submitting loan details!")})),a(!1)},validationSchema:S,validateOnChange:!0,validateOnBlur:!0,enableReinitialize:!0,validateOnMount:!0});return(0,y.jsx)("section",{className:"bg-red-50 dark:bg-[#001529] flex justify-center align-middle p-5",children:(0,y.jsxs)("div",{className:" bg-white p-5 w-4/5 min-h-screen rounded-3xl",children:[(0,y.jsx)("div",{className:"w-auto mx-14 my-4",children:(0,y.jsx)(v.A,{text:"Loan Application Form"})}),(0,y.jsx)(h.A,{indicator:(0,y.jsx)(c.A,{spin:!0}),size:"large",className:"text-red-800 dark:text-gray-400",spinning:l,children:(0,y.jsx)("form",{onSubmit:M.handleSubmit,children:(0,y.jsxs)("div",{className:"card flex flex-col justify-center px-16 py-5",children:[(0,y.jsxs)("div",{className:"grid gap-4 sm:grid-cols-6 sm:gap-6",children:[(0,y.jsxs)("div",{className:"sm:col-span-2",children:[(0,y.jsx)(i.A,{placeholder:"Type Member ID...",type:"text",label:"Member ID",name:"l_member_id",formControlName:M.values.l_member_id,handleChange:M.handleChange,handleBlur:async e=>{if(!M.values.l_member_id||0===+M.values.l_member_id)return void(0,m.Q)("warning","Please fill the Member ID.");a(!0),console.log("Member ID blurred:",e.target.value),M.handleBlur(e);const l={cust_id:+M.values.l_member_id};await u.A.post("".concat(_.O,"/oracle/select_cust_dtls"),l).then((e=>{var l;if(1===(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.suc)){var a,n,r,o,d,i,t,s,u,_,h,c,v,b,p,g,x,f,A,j;const l={l_member_id:M.values.l_member_id||D.l_member_id,l_membership_date:(null===(a=new Date(null===e||void 0===e||null===(r=e.data)||void 0===r||null===(o=r.msg)||void 0===o?void 0:o.CUST_DT))||void 0===a||null===(n=a.toISOString())||void 0===n?void 0:n.split("T")[0])||"",l_name:(null===e||void 0===e||null===(d=e.data)||void 0===d||null===(i=d.msg)||void 0===i?void 0:i.CUST_NAME)||"",l_father_husband_name:(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(s=t.msg)||void 0===s?void 0:s.GUARDIAN_NAME)||"",l_gender:(null===e||void 0===e||null===(u=e.data)||void 0===u||null===(_=u.msg)||void 0===_?void 0:_.SEX)||"",l_dob:(null===(h=new Date(null===e||void 0===e||null===(v=e.data)||void 0===v||null===(b=v.msg)||void 0===b?void 0:b.DT_OF_BIRTH))||void 0===h||null===(c=h.toISOString())||void 0===c?void 0:c.split("T")[0])||"",l_email:(null===e||void 0===e||null===(p=e.data)||void 0===p||null===(g=p.msg)||void 0===g?void 0:g.EMAIL)||"",l_mobile_no:(null===e||void 0===e||null===(x=e.data)||void 0===x||null===(f=x.msg)||void 0===f?void 0:f.PHONE)||"",l_address:(null===e||void 0===e||null===(A=e.data)||void 0===A||null===(j=A.msg)||void 0===j?void 0:j.PRESENT_ADDRESS)||""};T((e=>({...e,...l})))}else(0,m.Q)("error","Data not found!"),T(w)})).catch((e=>{(0,m.Q)("error","Some error occurred while fetching customer details.")})),a(!1)},mode:1}),M.errors.l_member_id&&M.touched.l_member_id?(0,y.jsx)(d.A,{title:M.errors.l_member_id}):null]}),(0,y.jsxs)("div",{className:"sm:col-span-2",children:[(0,y.jsx)(i.A,{placeholder:"Type Membership Date...",type:"date",label:"Membership Date",name:"l_membership_date",formControlName:M.values.l_membership_date,handleChange:M.handleChange,handleBlur:M.handleBlur,min:"1900-12-31",mode:1}),M.errors.l_membership_date&&M.touched.l_membership_date?(0,y.jsx)(d.A,{title:M.errors.l_membership_date}):null]}),(0,y.jsxs)("div",{className:"sm:col-span-2",children:[(0,y.jsx)(i.A,{placeholder:"Type name...",type:"text",label:"Name",name:"l_name",formControlName:M.values.l_name,handleChange:M.handleChange,handleBlur:M.handleBlur,mode:1}),M.errors.l_name&&M.touched.l_name?(0,y.jsx)(d.A,{title:M.errors.l_name}):null]})]}),(0,y.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 sm:gap-6 pt-5",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)(i.A,{placeholder:"Type Father's/Husband's Name...",type:"text",label:"Father's/Husband's Name",name:"l_father_husband_name",formControlName:M.values.l_father_husband_name,handleChange:M.handleChange,handleBlur:M.handleBlur,mode:1}),M.errors.l_father_husband_name&&M.touched.l_father_husband_name?(0,y.jsx)(d.A,{title:M.errors.l_father_husband_name}):null]}),(0,y.jsxs)("div",{children:[(0,y.jsx)(i.A,{placeholder:"Select Gender...",type:"text",label:"Gender",name:"l_gender",formControlName:M.values.l_gender,handleChange:M.handleChange,handleBlur:M.handleBlur,data:[{code:"M",name:"Male"},{code:"F",name:"Female"},{code:"L",name:"LGBTQA+"}],mode:2}),M.errors.l_gender&&M.touched.l_gender?(0,y.jsx)(d.A,{title:M.errors.l_gender}):null]}),(0,y.jsxs)("div",{children:[(0,y.jsx)(i.A,{placeholder:"Type DOB...",type:"date",label:"Date of Birth (DOB)",name:"l_dob",formControlName:M.values.l_dob,handleChange:M.handleChange,handleBlur:M.handleBlur,max:M.values.l_membership_date,mode:1}),M.errors.l_dob&&M.touched.l_dob?(0,y.jsx)(d.A,{title:M.errors.l_dob}):null]}),(0,y.jsxs)("div",{children:[(0,y.jsx)(i.A,{placeholder:"Type Email...",type:"email",label:"Email",name:"l_email",formControlName:M.values.l_email,handleChange:M.handleChange,handleBlur:M.handleBlur,mode:1}),M.errors.l_email&&M.touched.l_email?(0,y.jsx)(d.A,{title:M.errors.l_email}):null]}),(0,y.jsxs)("div",{children:[(0,y.jsx)(i.A,{placeholder:"Type Address...",type:"text",label:"Address",name:"l_address",formControlName:M.values.l_address,handleChange:M.handleChange,handleBlur:M.handleBlur,mode:3}),M.errors.l_address&&M.touched.l_address?(0,y.jsx)(d.A,{title:M.errors.l_address}):null]}),(0,y.jsxs)("div",{children:[(0,y.jsx)(i.A,{placeholder:"Type Mobile Number...",type:"number",label:"Mobile Number",name:"l_mobile_no",formControlName:M.values.l_mobile_no,handleChange:M.handleChange,handleBlur:M.handleBlur,mode:1}),M.errors.l_mobile_no&&M.touched.l_mobile_no?(0,y.jsx)(d.A,{title:M.errors.l_mobile_no}):null]}),(0,y.jsxs)("div",{children:[(0,y.jsx)(i.A,{placeholder:"Type Loan Through Branch...",type:"text",label:"Loan Through Branch",name:"l_loan_through_branch",formControlName:M.values.l_loan_through_branch,handleChange:M.handleChange,handleBlur:M.handleBlur,data:null===f||void 0===f?void 0:f.map((e=>({code:null===e||void 0===e?void 0:e.sl_no,name:null===e||void 0===e?void 0:e.branch_name}))),mode:2}),M.errors.l_loan_through_branch&&M.touched.l_loan_through_branch?(0,y.jsx)(d.A,{title:M.errors.l_loan_through_branch}):null]}),(0,y.jsxs)("div",{children:[(0,y.jsx)(i.A,{placeholder:"Type Applied For...",type:"text",label:"Applied For",name:"l_applied_for",formControlName:M.values.l_applied_for,handleChange:M.handleChange,handleBlur:M.handleBlur,data:null===C||void 0===C?void 0:C.map((e=>({code:null===e||void 0===e?void 0:e.sl_no,name:null===e||void 0===e?void 0:e.loan_type}))),mode:2}),M.errors.l_applied_for&&M.touched.l_applied_for?(0,y.jsx)(d.A,{title:M.errors.l_applied_for}):null]}),(0,y.jsxs)("div",{children:[(0,y.jsx)(i.A,{placeholder:"Type Loan Amount...",type:"number",label:"Loan Amount",name:"l_loan_amount",formControlName:M.values.l_loan_amount,handleChange:M.handleChange,handleBlur:M.handleBlur,mode:1}),M.errors.l_loan_amount&&M.touched.l_loan_amount?(0,y.jsx)(d.A,{title:M.errors.l_loan_amount}):null,(0,y.jsx)(d.A,{title:j(+M.values.l_loan_amount),color:"purple"})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)(i.A,{placeholder:"Type Duration...",type:"number",label:"Duration (In Months)",name:"l_duration",formControlName:M.values.l_duration,handleChange:M.handleChange,handleBlur:M.handleBlur,mode:1}),M.errors.l_duration&&M.touched.l_duration?(0,y.jsx)(d.A,{title:M.errors.l_duration}):null]})]}),(0,y.jsx)("div",{className:"mt-20",children:(0,y.jsx)(o.A,{mode:"A",onReset:M.handleReset})})]})})})]})})}}}]);
//# sourceMappingURL=253.5a22c394.chunk.js.map